arguments:
    api: Ovh\Api
    template: Innmind\Ark\Forge\Ovh\Template
    sshFolder: Innmind\Url\PathInterface
    server: Innmind\Server\Control\Server ?? $defaultServer

expose:
    ark: $ark

services:
    ark Innmind\Ark\Ark:
        - $forge
        - $array

    forge Innmind\Ark\Forge\Ovh:
        - $api
        - $ovh.available
        - $ovh.bootstrap
        - $ovh.dispose

    ovh:
        available Innmind\Ark\Forge\Ovh\Available\State:
            - $api

        bootstrap Innmind\Ark\Forge\Ovh\Bootstrap\Reinstall:
            - $api
            - $server
            - $template
            - $sshFolder

        dispose Innmind\Ark\Forge\Ovh\Dispose\Stop:
            - $api

    array Innmind\Ark\InstallationArray\Ovh:
        - $api
        - $ovh.available

    defaultServer Innmind\Server\Control\ServerFactory::build: []
